import numpy as np
import trimesh
import matplotlib.pyplot as plt

# Load the STL file
try:
    your_mesh = trimesh.load('aov_arm.stl')

    # Print the center of mass (cog)
    center_of_mass = your_mesh.center_mass
    print("Center of Mass:", center_of_mass)

    # Get the vertices of the mesh
    vertices = your_mesh.vertices

    # Project the vertices onto the XY plane (discarding the Z coordinate)
    xy_vertices = vertices[:, :2]

    # Create a Matplotlib figure and axis
    fig, ax = plt.subplots()

    # Plot the projected mesh (outline or points)
    # You could use plot_trisurf for the 3D plot and then project, but a 2D representation is likely what you need for an XY plane plot.
    # For a basic outline, you can plot the vertices as points
    ax.scatter(xy_vertices[:, 0], xy_vertices[:, 1], s=1, color='gray', alpha=0.5)

    # Plot the center of mass on the XY plane
    ax.scatter(center_of_mass[0], center_of_mass[1], color='red', marker='o', label='Center of Mass')

    # Set labels and title
    ax.set_xlabel('X-axis')
    ax.set_ylabel('Y-axis')
    ax.set_title('Mesh Projection and Center of Mass in XY Plane')

    # Add a legend to distinguish the center of mass
    ax.legend()

    # Show the plot
    plt.show()

except trimesh.exceptions.LoadError as e:
    print(f"Error loading mesh: {e}")
    print("Please make sure 'aov_arm.stl' exists and is a valid mesh file.")
